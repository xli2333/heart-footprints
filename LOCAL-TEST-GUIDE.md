# 🧪 心迹地图 - 本地测试指南

> 这是一份完整的本地测试指南，让你可以在没有配置数据库的情况下体验所有功能

## 🚀 **快速开始**

### 1. 确认项目正在运行

```bash
npm run dev
```

确认你看到：
- ✅ `Ready in 2.1s`
- ✅ `Local: http://localhost:3000`
- ✅ 控制台显示 `🔧 API Mode: Mock Mode (本地测试)`

### 2. 打开浏览器测试

访问：**http://localhost:3000**

## 🔐 **测试登录功能**

### 测试账号信息

**测试账号 1（他）**
- 密码：`test_password_him`
- 昵称：小明

**测试账号 2（她）**  
- 密码：`test_password_her`
- 昵称：小红

### 登录测试步骤

1. **正确密码测试**
   - 输入 `test_password_him`
   - 点击"进入我们的世界"
   - ✅ 应该成功进入主页，显示"欢迎回来，小明！"

2. **错误密码测试**
   - 输入错误密码如 `wrong_password`
   - ✅ 应该看到输入框摇摆动画和错误提示

3. **空密码测试**
   - 不输入任何内容直接点击按钮
   - ✅ 应该提示"请输入我们的暗号"

## 📱 **功能模块测试清单**

### 📍 **今日之约 - 定位同步测试**

#### 基础功能测试
- [ ] **初始状态显示**: 看到"今天，你在哪儿？"和"同步我的足迹"按钮
- [ ] **点击同步按钮**: 浏览器弹出位置权限请求
- [ ] **允许位置权限**: 按钮变为加载状态，然后显示"位置已同步，等待对方回应..."
- [ ] **心情选择**: 点击"添加今日心情"，选择表情，再同步

#### 高级功能测试
- [ ] **重复同步限制**: 同一天重复点击同步按钮，应提示"今天已经同步过位置了哦"
- [ ] **权限拒绝处理**: 拒绝位置权限，应显示相应错误提示

### 📸 **时光相册 - 照片上传测试**

#### 上传功能测试
- [ ] **查看预设照片**: 应该看到3张示例照片（来自 Picsum）
- [ ] **点击"寄送此刻"**: 弹出上传面板
- [ ] **拖拽上传**: 从电脑拖拽图片到上传区域
- [ ] **点击上传**: 点击上传区域选择图片文件
- [ ] **添加描述**: 输入描述文字，点击"放入我们的回忆"
- [ ] **上传进度**: 看到上传进度条和成功提示

#### 验证功能测试
- [ ] **文件类型验证**: 尝试上传非图片文件，应提示错误
- [ ] **文件大小验证**: 上传超过5MB的图片（如果有的话）
- [ ] **描述必填验证**: 不输入描述直接上传

#### 查看功能测试
- [ ] **悬停效果**: 鼠标悬停在照片上，看到信息显示
- [ ] **全屏查看**: 点击照片进入全屏模式
- [ ] **键盘导航**: 在全屏模式下使用左右箭头键切换照片
- [ ] **关闭查看**: 按ESC或点击背景关闭全屏

### ⏰ **倒数日 - 期待管理测试**

#### 创建倒数日测试
- [ ] **初始状态**: 看到"还没有新的约定哦"和"设置新约定"按钮
- [ ] **点击设置**: 弹出设置面板
- [ ] **填写信息**: 输入标题和未来日期时间
- [ ] **创建成功**: 看到实时倒计时显示

#### 倒计时功能测试
- [ ] **实时更新**: 秒数每秒递减
- [ ] **格式显示**: 天/小时/分钟/秒分格显示
- [ ] **编辑功能**: 点击编辑按钮修改倒数日
- [ ] **删除功能**: 点击删除按钮移除倒数日

#### 验证功能测试
- [ ] **过去时间验证**: 尝试设置过去的时间，应提示错误
- [ ] **标题长度验证**: 输入超长标题测试
- [ ] **必填验证**: 不填写标题或日期

### 💌 **时光信札 - 信件系统测试**

#### 查看预设信件测试
- [ ] **收件箱**: 默认显示收件箱，应该有1封未读信件（红点提示）
- [ ] **发件箱**: 切换到发件箱，看到已发送的信件
- [ ] **点击信件**: 点击信件进入阅读模式
- [ ] **自动标记已读**: 阅读信件后未读标识消失

#### 写信功能测试
- [ ] **点击写信**: 点击"写信"按钮弹出编辑器
- [ ] **立即发送**: 填写内容后立即发送
- [ ] **定时发送**: 勾选定时发送，设置未来时间
- [ ] **内容验证**: 测试空内容、超长内容等边界情况

#### 信件管理测试
- [ ] **标记已读**: 未读信件点击后自动标记为已读
- [ ] **删除信件**: 在发件箱删除自己发送的信件
- [ ] **定时状态**: 查看定时发送中的信件状态

## 🎨 **UI/UX 体验测试**

### 视觉效果测试
- [ ] **页面加载动画**: 刷新页面观察组件加载动画
- [ ] **悬停效果**: 测试按钮、卡片的悬停效果
- [ ] **点击反馈**: 点击按钮时的缩放动画
- [ ] **错误提示**: 各种错误情况的提示样式

### 响应式测试
- [ ] **桌面端**: 在大屏幕上测试布局
- [ ] **平板端**: 调整浏览器窗口到中等大小
- [ ] **手机端**: 调整到手机屏幕大小测试
- [ ] **侧边栏适应**: 观察左右两栏布局的响应变化

### 交互体验测试
- [ ] **加载状态**: 各种操作的加载指示
- [ ] **成功反馈**: 操作成功后的提示和动画
- [ ] **错误处理**: 各种错误情况的用户友好提示

## 🛠️ **调试和自定义**

### 环境变量自定义

编辑 `.env.local` 文件进行个性化设置：

```env
# 修改测试用户名
USER_HIM_NAME=你的昵称
USER_HER_NAME=她的昵称

# 修改测试密码
USER_HIM_PASSWORD=your_custom_password
USER_HER_PASSWORD=her_custom_password
```

修改后需要重启开发服务器：
```bash
# 停止服务器 (Ctrl+C)
# 然后重新启动
npm run dev
```

### 切换到真实 API 模式

当你准备连接真实数据库时：

```env
# 改为 false 使用真实 Supabase 数据库
NEXT_PUBLIC_USE_MOCK_API=false
```

### 控制台调试

打开浏览器开发者工具 (F12)，在 Console 中可以看到：
- API 模式提示
- 网络请求日志
- 错误信息（如果有）

## 📋 **测试完成检查清单**

完成以下测试表示功能正常：

### 基础功能 ✅
- [ ] 登录/登出正常
- [ ] 页面路由跳转正常
- [ ] 所有模块正常加载

### 今日之约 ✅
- [ ] 位置权限请求正常
- [ ] 同步状态显示正确
- [ ] 心情选择功能正常

### 时光相册 ✅
- [ ] 预设照片正常显示
- [ ] 照片上传功能正常
- [ ] 全屏查看体验良好

### 倒数日 ✅
- [ ] 创建/编辑/删除正常
- [ ] 实时倒计时准确

### 时光信札 ✅
- [ ] 信件收发正常
- [ ] 定时发送设置正常
- [ ] 已读状态管理正确

### UI/UX ✅
- [ ] 动画效果流畅
- [ ] 响应式布局正常
- [ ] 错误提示友好

## 🚀 **测试完成后的下一步**

当你完成所有测试并满意 UI/UX 效果后：

1. **关闭 Mock 模式**：设置 `NEXT_PUBLIC_USE_MOCK_API=false`
2. **配置 Supabase**：按照 `DEPLOYMENT.md` 设置真实数据库
3. **部署到 Vercel**：将项目部署到线上环境

## 💡 **测试技巧**

- **多开标签页**：模拟两人同时使用的场景
- **清除浏览器缓存**：测试首次访问体验
- **模拟慢网络**：在开发者工具中限制网络速度
- **测试边界情况**：尝试各种异常输入和操作

---

**祝你测试愉快！如果遇到任何问题，检查控制台错误信息或重启开发服务器。** ✨